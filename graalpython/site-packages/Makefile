.PHONY: clean install


SETUPTOOLS_VERSION = 40.6.3
PYTHON_VERSION = 3.7

SETUPTOOLS_DIR = setuptools-${SETUPTOOLS_VERSION}
IN_SETUPTOOLS_DIR = cd ${SETUPTOOLS_DIR} &&
# SITE_PATH = ../lib-python/3/site-packages/


QUIETLY$(MX_VERBOSE) = @
OPT_QUIET$(MX_VERBOSE) = --quiet
OPT_VERBOSE =

ifeq ($(MX_VERBOSE),y)
	OPT_VERBOSE = -v
endif


default: install

install:
	$(QUIETLY) mx $(OPT_VERBOSE) python3 -m build_capi
	$(QUIETLY) mx $(OPT_VERBOSE) python3 -m zipfile -e ${SETUPTOOLS_ZIP} .
	$(QUIETLY) ${IN_SETUPTOOLS_DIR} mx $(OPT_VERBOSE) python3 bootstrap.py
	$(QUIETLY) ${IN_SETUPTOOLS_DIR} mx $(OPT_VERBOSE) python3 setup.py $(OPT_QUIET) install --user

clean:
	$(QUIETLY) rm -rf ${SETUPTOOLS_DIR}
	# $(QUIETLY) rm -rf ${SITE_PATH}/*
